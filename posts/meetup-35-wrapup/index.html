<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Hybrid Meetup #35 wrap-up | Leipzig Gophers</title>

    <style>body{margin:1em auto;padding:1em;color:#2f2d2e;max-width:45em;line-height:1.6;font-family:Georgia,serif;font-size:1.2em}h1{border-bottom:2pt solid #2f2d2e}.header-menu{float:right}ul.pagination{list-style-type:none;text-align:center;padding:0}ul.pagination>li{padding:0 .4em;display:inline-block}div.footer{border-top:1pt solid;text-align:center;padding:1em}img{max-width:100%;max-height:100%;display:block;margin-left:auto;margin-right:auto}@media(min-width:45em){div.tags{float:right}}img[src*="#half"]{width:50%}a{text-decoration:none;color:#35a7ff;border-bottom:2pt solid #fff}a:visited{color:#ff5964}a:hover{border-bottom:2pt solid #ff5964;transition:all 333ms ease-in}a.tag{padding:.1em .4em;background:#2f2d2e;color:#fff;text-decoration:none;border-radius:5pt}a.anchor{padding-right:.3em}blockquote{color:#838383}</style>

    

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">



</head>


<body>
<div class="header">
    <a href="/">Leipzig Gophers</a>
    <div class="header-menu">
        <a href="/posts/">blog</a>
    </div>
</div>
<div id="content">

<header>
    <h1 id="#hybrid-meetup-35-wrap-up">
        <a class="anchor" href="#hybrid-meetup-35-wrap-up">ðŸ”—</a>Hybrid Meetup #35 wrap-up</h1>
    

<div class="post-meta"><time datetime="2023-04-19">Apr 19, 2023</time><div class="tags">
        Tags
        <a class="tag" href="https://golangleipzig.space/tags/summary/">summary</a>
        <a class="tag" href="https://golangleipzig.space/tags/meetup/">meetup</a>
    </div>
</div>
</header>
<article>
    <h2 id="cgo-experiments">Cgo experiments</h2>
<p>Hybrid meetup #35 took place <a href="https://www.meetup.com/leipzig-golang/events/290666173/">2023-04-18
19:00</a> at <a href="https://www.basislager.co/">Basislager
Leipzig</a> and was all about <a href="https://pkg.go.dev/cmd/cgo">Cgo</a>.</p>
<p>Cgo allows to bridge C and Go. From C, we can connect to other languages, like
C++, too. Use cases are legacy code or performance. Implementing a
<a href="https://github.com/miku/cgosamples/blob/06f9ab34f0aef71f865872bfcfd391a01a626a0d/x/xcgoloop/main.go#L1-L95">pseudo-random
walk</a>
(using an <a href="https://en.wikipedia.org/wiki/Linear_congruential_generator">LCG</a>
<a href="https://en.wikipedia.org/wiki/Lehmer_random_number_generator">generator</a>) in
both Go and C shows that C can be up to 4x faster for this particular task.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"> C               1              -1 29.553Âµs
GO               1              -1 84.303Âµs
 C            1000             -12 41.799Âµs
GO            1000              26 107.295Âµs
 C         1000000           -1810 22.837387ms
GO         1000000              -2 83.182797ms
 C      1000000000           15894 6.25975724s
GO      1000000000          -44632 25.620427056s
</code></pre></div><p>One example was concerned with wrapping
<a href="https://github.com/ggerganov/ggml">ggml</a>, a lightweight <em>tensor library for
machine learning</em> -
<a href="https://github.com/miku/cgosamples/tree/main/x/xcgoggml">xcgoggml</a>. A
threading <a href="https://github.com/miku/cgosamples/tree/main/x/xcgothreads">mystery
remains</a>.</p>
<p>Experiment details can be found here: <a href="https://github.com/miku/cgosamples">https://github.com/miku/cgosamples</a></p>
<h2 id="zig-cross-compilation">Zig cross-compilation</h2>
<p>The zig compiler (LLVM) can build real staticly linked binaries from a Go
project with C dependencies, such as sqlite3. Example repo:
<a href="https://github.com/klingtnet/cross-compile-with-zigcc">https://github.com/klingtnet/cross-compile-with-zigcc</a>.</p>
<h2 id="misc">Misc</h2>
<ul>
<li>Cgo is a not Go, many guarantees are given up, maintenance of mixed C and Go
code is much more difficult - rather than use CGO, maybe a grpc or other
interface may keep C and Go world better separated</li>
<li>To wrap C++, we need to create a C <a href="https://en.wikipedia.org/wiki/Facade_pattern">faÃ§ade</a></li>
<li>Go has a nice <a href="https://pkg.go.dev/go/ast">ast</a></li>
<li>GRCP performance in Go may suffer, if interfaces are used (due to overhead of reflection)</li>
<li><a href="https://github.com/deepmap/oapi-codegen">oapi-codegen</a> is an openapi code generator for Go (and an alternative to the <a href="https://github.com/OpenAPITools/openapi-generator">swagger tool</a>)</li>
<li>Go&rsquo;s type system can be limiting, when working with Web APIs or SDKs</li>
<li><a href="https://www.simpleml.com/">Simple Markup Language</a></li>
<li><a href="https://hackage.haskell.org/package/parsec">Parsec</a>, <a href="https://github.com/alecthomas/participle">Participle</a></li>
<li><a href="https://ruudvanasseldonk.com/2023/01/11/the-yaml-document-from-hell">YAML/HELL</a></li>
<li>Using symbols straight from a dynamic library via <a href="https://stackoverflow.com/a/27510758/89391">dlopen</a></li>
<li>A rundown of a benchmark across Python, C, and BLAS, for a HPC and competetive programming blog: <a href="https://en.algorithmica.org/hpc/complexity/languages/">https://en.algorithmica.org/hpc/complexity/languages/</a></li>
</ul>
<p>We also briefly discussed
<a href="https://en.wikipedia.org/wiki/Large_language_model">LLMs</a>, as we ran
<a href="https://crfm.stanford.edu/2023/03/13/alpaca.html">alpaca</a> <a href="https://huggingface.co/Sosaka/Alpaca-native-4bit-ggml/blob/main/ggml-alpaca-7b-q4.bin">model
ggml-alpaca-7b-q4.bin</a> in the
background, which wrote some simple SQL and thought of a haiku about the Go programming language:</p>
<p><img src="/images/578575.gif" alt=""></p>
<p>Did you find a nice haiku?</p>
<p><a href="https://www.meetup.com/Leipzig-Golang/">Join our meetup</a> and let us know!</p>

</article>


    </div>
<div class="footer">
    
    
    <div class="footer-links">
        <a href="https://www.meetup.com/Leipzig-Golang/">Meetup</a><span> / <span><a href="https://github.com/golang-leipzig">GitHub</a><span> / <span><a href="https://raw.githubusercontent.com/golang-leipzig/golang-leipzig.github.io/source/Impressum.txt">Imprint</a><span> / <span><a href="/qr.png">QR</a><span> / <span><a href="https://1mb.club/">1MB</a></div>
    

    
    
</div>
</body>

</html>