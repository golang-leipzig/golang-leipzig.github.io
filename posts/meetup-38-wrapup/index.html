<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Hybrid Meetup #38 wrap-up | Leipzig Gophers</title>

    <style>body{margin:1em auto;padding:1em;color:#2f2d2e;max-width:45em;line-height:1.6;font-family:Georgia,serif;font-size:1.2em}h1{border-bottom:2pt solid #2f2d2e}.header-menu{float:right}ul.pagination{list-style-type:none;text-align:center;padding:0}ul.pagination>li{padding:0 .4em;display:inline-block}div.footer{border-top:1pt solid;text-align:center;padding:1em}img{max-width:100%;max-height:100%;display:block;margin-left:auto;margin-right:auto}@media(min-width:45em){div.tags{float:right}}img[src*="#half"]{width:50%}a{text-decoration:none;color:#35a7ff;border-bottom:2pt solid #fff}a:visited{color:#ff5964}a:hover{border-bottom:2pt solid #ff5964;transition:all 333ms ease-in}a.tag{padding:.1em .4em;background:#2f2d2e;color:#fff;text-decoration:none;border-radius:5pt}a.anchor{padding-right:.3em;color:#d3d3d3}blockquote{color:#838383}</style>

    

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<meta name='impact-site-verification' value='54840aba-1503-416b-b5d7-dafee41af763'> 



</head>


<body>
<div class="header">
    <a href="/">Leipzig Gophers</a>
    <div class="header-menu">
        <a href="/posts/">blog</a>
    </div>
</div>
<div id="content">

<header>
    <h1 id="#hybrid-meetup-38-wrap-up">
        <a class="anchor" href="#hybrid-meetup-38-wrap-up">ðŸ”—</a>Hybrid Meetup #38 wrap-up</h1>
    

<div class="post-meta"><time datetime="2023-11-22">Nov 22, 2023</time><div class="tags">
        Tags
        <a class="tag" href="https://golangleipzig.space/tags/summary/">summary</a>
        <a class="tag" href="https://golangleipzig.space/tags/meetup/">meetup</a>
    </div>
</div>
</header>
<article>
    <h2 id="a-cache-is-worth-a-thousand-searches">A cache is worth a thousand searches</h2>
<p>Hybrid meetup #38 took place <a href="https://www.meetup.com/leipzig-golang/events/290666185/">2023-11-20
19:00</a> at
<a href="https://check24.de">CHECK24</a> Leipzig Office.</p>
<p>We had a great presentation from
<a href="https://www.linkedin.com/in/fabian-g%C3%A4rtner-913584141/">Fabian</a> about
building a mission critical query caching database (MemoryDB) in Go and the
challenges involved.</p>
<p>One challenge is the variety of query parameters and nearly overlapping
values and ranges. A key for performance is to express various parameter values (e.g.
date boundaries) with the help of <a href="https://en.wikipedia.org/wiki/Bit_array">BitMaps</a>,
e.g. <a href="https://r-libre.teluq.ca/1402/1/1709.07821.pdf">Roaring Bitmaps</a>.</p>
<blockquote>
<p>Bitmap indexes are commonly used in databases and search engines. By
exploiting bit-level parallelism, they can significantly accelerate queries. &ndash; <a href="https://r-libre.teluq.ca/602/1/RoaringBitmap.pdf">RoaringBitmap.pdf</a></p>
</blockquote>
<p>Among other things, the project also uses <a href="https://github.com/cloudflare/tableflip">tableflip</a> - a library that allows you to</p>
<blockquote>
<p>update the running code and / or configuration of a network service, without disrupting existing connections.</p>
</blockquote>
<p>A very practical concern has been the struct design for GC-friendlyness. Pop
quiz:</p>
<ul>
<li>Is the following struct GC-friendly?</li>
<li>When would it become a problem?</li>
<li>What could be improved?</li>
</ul>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#998;font-style:italic">// Offer, abridged.
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">type</span> Offer <span style="color:#000;font-weight:bold">struct</span> {
    HomeAirport        <span style="color:#000;font-weight:bold">*</span>Airport
    DestinationAirport <span style="color:#000;font-weight:bold">*</span>Airport
    Hotel              <span style="color:#000;font-weight:bold">*</span>Hotel
    RoomType           <span style="color:#458;font-weight:bold">string</span>
    MealType           <span style="color:#458;font-weight:bold">string</span>
    Airline            <span style="color:#458;font-weight:bold">string</span>
    DepartureTime      time.Time
    ReturnTime         time.Time
}
</code></pre></div><p>If possible, one can try to use stack allocated values (note: Go
<a href="https://go.dev/ref/spec">ref/spec</a> never mentions to stack or heap, as these
concepts are abstracted by the language):</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#998;font-style:italic">// Offer, reduced, abridged.
</span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">type</span> Offer <span style="color:#000;font-weight:bold">struct</span> {
    HomeAirportID        <span style="color:#458;font-weight:bold">int</span>
    DestinationAirportID <span style="color:#458;font-weight:bold">int</span>
    HotelID              <span style="color:#458;font-weight:bold">int</span>
    RoomType             RoomTypeEnum
    MealType             MealTypeEnum
    AirlineID            <span style="color:#458;font-weight:bold">int</span>
    DepartureTime        <span style="color:#458;font-weight:bold">int64</span>
    ReturnTime           <span style="color:#458;font-weight:bold">int64</span>
}
</code></pre></div><p>This is now a much more compact, GC-friendly struct that will require
additional object lookups for respective identifiers but would reduce GC load
significantly, when dealing with millions of objects. Simple, effective.</p>
<p><a href="https://www.linkedin.com/posts/florianbr%C3%A4utigam_golang-meetup-golangmeetup-activity-7138814464618860544--Xe2"><img src="/images/meetup-38-pic-sketch.jpg" alt=""></a></p>
<h2 id="testdriving-ollamahttpsollamaai">Testdriving <a href="https://ollama.ai">OLLAMA</a></h2>
<p>A lightning talk was concerned with <a href="https://github.com/miku/localmodels">Testdriving
OLLAMA</a> - a packaging tool for large
language model files. Ollama is inspired by docker and allows to wrap LLM
customizations (parameters, context) into a easy to distribute format.</p>
<p>Thanks to projects like <a href="https://ai.meta.com/llama/">LLAMA</a> and
<a href="https://github.com/ggerganov/llama.cpp">llama.cpp</a> it is possible to
experiment with LLMs on everyday hardware, e.g. a 15W TDP <a href="https://www.intel.com/content/www/us/en/products/sku/122589/intel-core-i78550u-processor-8m-cache-up-to-4-00-ghz/specifications.html">2017
CPU</a>.</p>
<p><a href="https://golangleipzig.space/meetup-38-llm-haiku/meetup-38-llm-haiku.pdf"><img src="/images/three-genai-haiku.png" alt=""></a></p>
<h2 id="thanks">Thanks!</h2>
<p>Thanks <a href="https://check24.de">CHECK24</a> for hosting Leipzig Gophers November 2023
Meetup, <a href="https://www.linkedin.com/in/fabian-g%C3%A4rtner-913584141/">Fabian</a> for the
great talk and <a href="https://www.linkedin.com/in/florianbr%C3%A4utigam/">Florian</a>
for the excellent event organisation.</p>
<hr>
<p>Are you using an interesting data structure like bitmaps to improve
performance? Then <a href="https://www.meetup.com/Leipzig-Golang/">join our meetup</a> and
tell us about it!</p>

</article>


    </div>
<div class="footer">
    
    
    <div class="footer-links">
        <a href="https://www.meetup.com/Leipzig-Golang/">Meetup</a><span> / <span><a href="https://github.com/golang-leipzig">GitHub</a><span> / <span><a href="https://raw.githubusercontent.com/golang-leipzig/golang-leipzig.github.io/source/Impressum.txt">Imprint</a><span> / <span><a href="/qr.png">QR</a><span> / <span><a href="https://1mb.club/">1MB</a><span> / <span><a href="/llms.txt">LLM</a></div>
    

    
    
</div>
</body>

</html>